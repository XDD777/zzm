window.onload = function () {
  function random_color(elem) {
    (this.colors = ['#00a8ff', '#9c88ff', '#fbc531', '#4cd137', '#273c75', '#353b48']),
      (this.elem = elem),
      (this.run = function () {
        setInterval(() => {
          this.elem.style.color = this.colors[Math.floor(Math.random() * this.colors.length)];
        }, 1e3);
      });
  }
  let dom;
  new random_color(document.getElementById('random_me')).run(), console.log(window.screen.width, window.screen.height);
  let cur_changePage_index = 0,
    pages = document.getElementsByClassName('page'),
    pages_len = pages.length,
    scroll_handling = !1,
    page0,
    page1,
    page2,
    page3,
    page4;
    page5;
  function make_it_double(num) {
    return num >= 10 ? num : `0${num}`;
  }
  function get_time() {
    let days = document.getElementById('days'),
      hours = document.getElementById('hours'),
      minutes = document.getElementById('minutes'),
      seconds = document.getElementById('seconds');
    (days.innerHTML = make_it_double(30 - parseInt(new Date().getDate()))), (hours.innerHTML = make_it_double(23 - parseInt(new Date().getHours()))), (minutes.innerHTML = make_it_double(59 - parseInt(new Date().getMinutes()))), (seconds.innerHTML = make_it_double(60 - parseInt(new Date().getSeconds())));
  }
  function sizing() {
    document.getElementById('page_wrapper').style.height = 100 * pages_len + 'vh';
  }
  function onWheel(e) {
    if (!scroll_handling) {
      var deltaY = e.wheelDeltaY || -40 * e.deltaY;
      (scroll_handling = !0),
        window.setTimeout(function () {
          scroll_handling = !1;
        }, 800),
        changePage(deltaY < 0 ? 'next' : 'pre');
    }
  }
  function changePage(act) {
    let changePage_index = 0,
      page_wrap = document.getElementById('page_wrapper'),
      current = document.getElementsByClassName('cur'),
      current_len = current.length;
    if ('next' === act) changePage_index = ++cur_changePage_index;
    else if ('pre' === act) changePage_index = --cur_changePage_index;
    else if ('page0' === act) console.log('test page0'), (changePage_index = 0);
    else if ('page1' === act) console.log('test page1'), (changePage_index = 1);
    else if ('page2' === act) console.log('test page2'), (changePage_index = 2);
    else if ('page3' === act) console.log('test page3'), (changePage_index = 3);
    else if ('page5' === act) console.log('test page5'), (changePage_index = 5);
    else {
      if ('page4' !== act) return;
      console.log('test page4'), (changePage_index = 4);
    }
    if (changePage_index < 0) cur_changePage_index = 0;
    else if (changePage_index >= pages_len) cur_changePage_index = pages_len - 1;
    else {
      if (((cur_changePage_index = changePage_index), console.log('changePage_index:' + changePage_index), (page_wrap.style.top = 100 * -changePage_index + 'vh'), null != current)) for (; current_len--; ) current[current_len].className = current[current_len].className.replace(/ cur/, '');
      pages[changePage_index].className += ' cur';
    }
  }
  console.log(pages_len),
    sizing(),
    (function shadow_it() {
      let shadow = '',
        dom;
      for (let i = 1; i <= 10; i++) shadow += `-${i}px ${i}px 0 #eee,`;
      (shadow = shadow.slice(0, -1)), console.log(shadow), (document.getElementById('time-count').style.textShadow = shadow);
    })(),
    setInterval(get_time, 1e3),
    document.body.addEventListener('keydown', function (e) {
      var key_code = e.keyCode;
      38 == key_code ? changePage('pre') : 40 == key_code && changePage('next');
    }),
    window.addEventListener('resize', sizing),
    window.addEventListener('wheel', onWheel),
    document.getElementById('to_page0').addEventListener('click', function () {
      changePage('page0');
    }),
    document.getElementById('to_page1').addEventListener('click', function () {
      changePage('page1');
    }),
    document.getElementById('to_page2').addEventListener('click', function () {
      changePage('page2');
    }),
    document.getElementById('to_page3').addEventListener('click', function () {
      changePage('page3');
    }),
    document.getElementById('to_page4').addEventListener('click', function () {
      changePage('page4');
    });
    document.getElementById('to_page5').addEventListener('click', function () {
      changePage('page5');
    });
};
